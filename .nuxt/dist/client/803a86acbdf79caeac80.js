(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{155:function(t,e,n){"use strict";e.a={methods:{footer:function(){$("#mailContent").height()<$(window).height()?this.$store.commit("changeFooterFixed",!0):this.$store.commit("changeFooterFixed",!1)}}}},157:function(t,e,n){"use strict";n.d(e,"f",(function(){return v})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return _})),n.d(e,"d",(function(){return w})),n.d(e,"n",(function(){return y})),n.d(e,"i",(function(){return x})),n.d(e,"a",(function(){return S})),n.d(e,"e",(function(){return F})),n.d(e,"c",(function(){return j})),n.d(e,"m",(function(){return k})),n.d(e,"j",(function(){return H})),n.d(e,"b",(function(){return C})),n.d(e,"l",(function(){return O})),n.d(e,"k",(function(){return Y}));n(80),n(21),n(22),n(13),n(62);var o=n(45),r=n(159),c=n.n(r);c.a.interceptors.response.use((function(t){return t.data?t.data:{}}),(function(t){return Promise.reject(t)}));var h=c.a;function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f="https://blogapi.naice.me/api/",v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.get("".concat(f,"article/get"),{params:t})},d=function(t){return h.get("".concat(f,"article/get/").concat(t))},_=function(){return h.get("".concat(f,"article/getAll"))},w=function(t){return h.post("".concat(f,"article/like/").concat(t))},y=function(){return h.get("".concat(f,"tag/get"))},x=function(t){return h.get("".concat(f,"comment/get"),{params:t})},S=function(t){return h.put("".concat(f,"comment/add"),l({},t))},F=function(t){return h.post("".concat(f,"comment/like/").concat(t))},j=function(t){return h.put("".concat(f,"reply/add"),l({},t))},k=function(t){return h.get("".concat(f,"reply/get/").concat(t))},H=function(t){return h.get("".concat(f,"hero/get"),{params:t})},C=function(t){return h.put("".concat(f,"hero/add"),l({},t))},O=function(t){return h.get("".concat(f,"project/get"),{params:t})},Y=function(t){return h.get("".concat(f,"music/get"),{params:t})}},158:function(t,e,n){},161:function(t,e,n){"use strict";e.a={methods:{toZero:function(t){return t>9?t:"0".concat(t)},toTime:function(t,e){var n=new Date(t);return"".concat(n.getFullYear()).concat(e).concat(this.toZero(n.getMonth()+1)).concat(e).concat(this.toZero(n.getDate()))}}}},162:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=["https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3954676606,1888158900&fm=11&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1286998490,3468341349&fm=11&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=353868547,2822233069&fm=27&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1178011732,3353631614&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2481763586,4087522518&fm=27&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1034317729,337624616&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=128013007,1946750280&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4148795727,732143832&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4121225864,785761951&fm=27&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3619070856,3103619106&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1910862757,2676655804&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=977468359,542518020&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=600840806,2113634000&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2475222708,3513835460&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1478849654,1851926890&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1921393379,4069134737&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1067594990,1110172622&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=566083323,1162924276&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2200767505,492420988&fm=27&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1873573939,3515804663&fm=27&gp=0.jpg"]},167:function(t,e,n){"use strict";var o=n(158);n.n(o).a},168:function(t,e,n){},174:function(t,e,n){"use strict";n(24);var o=n(162),r={props:{reply:{type:String,default:""},at:{type:Object,default:function(){return{}}},cid:{type:String,default:""}},data:function(){return{content:"",isShowBtn:!1,userinfo:{name:"",email:"",site:"",gravatar:""},regexs:{email:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,url:/^((https|http):\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/},showUserSet:!0,showReset:!1,avarterArr:o.a}},computed:{averterNum:function(){return this.$store.state.averterNum}},methods:{contenFocus:function(){this.reply||(this.isShowBtn=!0)},contenBlur:function(){this.content||this.reply||(this.isShowBtn=!1)},validate:function(){var t=this.userinfo,e=t.name,n=t.email,o=t.site;return e.trim()?n.trim()?this.regexs.email.test(n)?!(o&&!this.regexs.url.test(o))||(alert("请输入正确网址格式哦~~"),!1):(alert("请输入正确邮箱格式哦~~"),!1):(alert("请输入邮箱哦~~"),!1):(alert("请输入昵称哦~~"),!1)},submit:function(){var t=this;if(this.validate()){if(!this.content.trim())return alert("请输入评论内容哦~~"),!1;this.userinfo.gravatar=this.averterNum,localStorage.setItem("userInfo",JSON.stringify(this.userinfo));var e={content:this.content};this.reply?(this.at.name&&(e.to=this.at),e.from=this.userinfo,e.cid=this.cid):e.author=this.userinfo,this.showUserSet=!1,this.showReset=!1,this.$emit("pushComment",e),setTimeout((function(){t.content="",t.isShowBtn=!1}),500)}},editeInfo:function(){this.showUserSet=!0,this.showReset=!0},clearInfo:function(){this.showUserSet=!0,this.showReset=!0,this.userinfo={name:"",email:"",site:"",averter:this.averterNum},localStorage.setItem("userInfo","")},conform:function(){this.validate()&&(localStorage.setItem("userInfo",JSON.stringify(this.userinfo)),this.showUserSet=!1,this.showReset=!1)},concleReply:function(){this.$emit("concleReply")}},mounted:function(){var t=localStorage.getItem("userInfo");t&&(this.userinfo=JSON.parse(t),this.showUserSet=!1)}},c=(n(167),n(9)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"arcComment",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[t.reply?t._e():n("div",{staticClass:"averter"},[n("img",{attrs:{src:t.avarterArr[t.averterNum],alt:""}})]),t._v(" "),n("div",{staticClass:"inputBox",style:t.isShowBtn?{height:"180px"}:null},[t.showUserSet?n("div",{staticClass:"user"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.name,expression:"userinfo.name"}],attrs:{type:"text",placeholder:"称呼*"},domProps:{value:t.userinfo.name},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"name",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.email,expression:"userinfo.email"}],attrs:{type:"email",placeholder:"邮箱(不会公开)*"},domProps:{value:t.userinfo.email},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"email",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.site,expression:"userinfo.site"}],attrs:{type:"text",placeholder:"网站（http, https:// 开头)"},domProps:{value:t.userinfo.site},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"site",e.target.value)}}}),t._v(" "),t.showReset?n("span",{staticClass:"confirm",on:{click:t.conform}},[n("i",{staticClass:"iconfont"},[t._v("")])]):t._e()]):n("div",{staticClass:"hasuser"},[n("span",{staticClass:"name"},[t._v(t._s(t.userinfo.name))]),t._v(" "),n("div",{staticClass:"userSet"},[t._m(0),t._v(" "),n("div",{staticClass:"setCon"},[n("p",{on:{click:t.editeInfo}},[n("i",[t._v("•")]),t._v("编辑信息")]),t._v(" "),n("p",{on:{click:t.clearInfo}},[n("i",[t._v("•")]),t._v("清空信息")])])])]),t._v(" "),n("div",{staticClass:"comContent"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],style:t.reply?{height:"43px"}:null,attrs:{placeholder:t.at.name?"回复 "+t.at.name+":":"这位大侠说说你的看法~"},domProps:{value:t.content},on:{focus:t.contenFocus,blur:t.contenBlur,input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),t.reply?n("div",{staticClass:"rBtn"},[t.at.name&&!t.content?n("span",{on:{click:t.concleReply}},[t._v("取消")]):n("span",{on:{click:t.submit}},[t._v("评论")])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtn,expression:"isShowBtn"}],staticClass:"submit",on:{click:t.submit}},[n("span",[t._v("评论")])])])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setBtn"},[e("i",{staticClass:"iconfont"},[this._v("")]),this._v("账户设置")])}],!1,null,"1c6c0b67",null);e.a=component.exports},210:function(t,e,n){"use strict";var o=n(168);n.n(o).a},231:function(t,e,n){"use strict";n.r(e);n(34);var o=n(5),r=n(174),c=n(155),h=n(161),m=n(157),l=null,f={head:{title:"naice | 留言墙"},layout:"layout",components:{Comment:r.a},data:function(){return{btnShow:!1,showUp:!1,page:0,hasMore:!0,loadText:"加载中..."}},mixins:[c.a,h.a],computed:{hero:function(){return this.$store.state.hero.data}},methods:{up:function(){var t=this;this.btnShow=!0,clearInterval(l),l=setTimeout((function(){t.btnShow=!1,t.showUp=!0}),500)},hidePopup:function(){this.showUp=!1},getHeroData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.page+=1,t.loadText="加载中...",e.next=4,Object(m.j)({current_page:t.page});case 4:1===(n=e.sent).code&&(o=n.result.list||[],t.page>1&&(o=t.hero.concat(o)),t.$store.commit("getHero",o)),t.page>=n.result.pagination.total_page?t.hasMore=!1:t.hasMore=!0,t.loadText="加载更多",t.$nextTick((function(){t.footer()}));case 9:case"end":return e.stop()}}),e)})))()},toAddHero:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(m.b)(t);case 2:1===n.sent.code&&(e.showUp=!1,e.page=0,e.getHeroData());case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){0===this.hero.length&&this.getHeroData()}},v=(n(210),n(9)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"heroBox"},[n("button",{staticClass:"bubbly-button",class:t.btnShow?"animate":"",on:{click:t.up}},[t._v("我要上墙!")]),t._v(" "),n("div",{staticClass:"heroList"},t._l(t.hero,(function(e,o){return n("div",{key:o,staticClass:"item"},[n("div",{staticClass:"time"},[t._v(t._s(t.toTime(e.create_time,"-")))]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),n("div",{staticClass:"author"},[t._v("——"+t._s(e.author.name))]),t._v(" "),n("div",{staticClass:"bgcircle"})])})),0),t._v(" "),t.hasMore?n("div",{staticClass:"loadmore more",on:{click:t.getHeroData}},[t._v(t._s(t.loadText))]):n("div",{staticClass:"nomore"},[t._v("木有更多鸟")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showUp,expression:"showUp"}],staticClass:"popup",on:{click:t.hidePopup}},[n("div",[n("comment",{on:{pushComment:t.toAddHero}})],1)])])],1)}),[],!1,null,"283ca658",null);e.default=component.exports}}]);