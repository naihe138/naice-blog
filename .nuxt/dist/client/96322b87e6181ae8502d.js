(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{155:function(t,e,n){"use strict";e.a={methods:{footer:function(){$("#mailContent").height()<$(window).height()?this.$store.commit("changeFooterFixed",!0):this.$store.commit("changeFooterFixed",!1)}}}},157:function(t,e,n){"use strict";n.d(e,"f",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"g",(function(){return _})),n.d(e,"d",(function(){return O})),n.d(e,"n",(function(){return y})),n.d(e,"i",(function(){return w})),n.d(e,"a",(function(){return j})),n.d(e,"e",(function(){return C})),n.d(e,"c",(function(){return k})),n.d(e,"m",(function(){return D})),n.d(e,"j",(function(){return x})),n.d(e,"b",(function(){return T})),n.d(e,"l",(function(){return P})),n.d(e,"k",(function(){return $}));n(80),n(21),n(22),n(13),n(62);var r=n(45),o=n(159),c=n.n(o);c.a.interceptors.response.use((function(t){return t.data?t.data:{}}),(function(t){return Promise.reject(t)}));var l=c.a;function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v="https://blogapi.naice.me/api/",m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.get("".concat(v,"article/get"),{params:t})},h=function(t){return l.get("".concat(v,"article/get/").concat(t))},_=function(){return l.get("".concat(v,"article/getAll"))},O=function(t){return l.post("".concat(v,"article/like/").concat(t))},y=function(){return l.get("".concat(v,"tag/get"))},w=function(t){return l.get("".concat(v,"comment/get"),{params:t})},j=function(t){return l.put("".concat(v,"comment/add"),d({},t))},C=function(t){return l.post("".concat(v,"comment/like/").concat(t))},k=function(t){return l.put("".concat(v,"reply/add"),d({},t))},D=function(t){return l.get("".concat(v,"reply/get/").concat(t))},x=function(t){return l.get("".concat(v,"hero/get"),{params:t})},T=function(t){return l.put("".concat(v,"hero/add"),d({},t))},P=function(t){return l.get("".concat(v,"project/get"),{params:t})},$=function(t){return l.get("".concat(v,"music/get"),{params:t})}},161:function(t,e,n){"use strict";e.a={methods:{toZero:function(t){return t>9?t:"0".concat(t)},toTime:function(t,e){var n=new Date(t);return"".concat(n.getFullYear()).concat(e).concat(this.toZero(n.getMonth()+1)).concat(e).concat(this.toZero(n.getDate()))}}}},165:function(t,e,n){},166:function(t,e,n){},208:function(t,e,n){"use strict";var r=n(165);n.n(r).a},209:function(t,e,n){"use strict";var r=n(166);n.n(r).a},226:function(t,e,n){"use strict";n.r(e);n(80),n(21),n(22),n(13),n(62);var r=n(45),o=(n(34),n(5)),c=n(157),l={data:function(){return{scrollDom:null,scrollNum:0}},computed:{scrollTop:function(){return this.$store.state.scrollTop}},methods:{scroll:function(t){1===t?this.scrollNum+=400:this.scrollNum=0,$("html,body").animate({scrollTop:"".concat(this.scrollNum,"px")},300)},mail:function(){window.open("http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=CTo_OTs4PDs6OUl4eCdqZmQ","_blank")}},watch:{scrollTop:function(t){this.scrollNum=t}}},f=(n(208),n(9)),d=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sideIcon"},[n("i",{staticClass:"iconfont",on:{click:t.mail}},[t._v("")]),t._v(" "),n("i",{staticClass:"iconfont",on:{click:function(e){return t.scroll(1)}}},[t._v("")]),t._v(" "),n("i",{staticClass:"iconfont",on:{click:function(e){return t.scroll(0)}}},[t._v("")])])}),[],!1,null,"56bc0acf",null).exports,v=n(155),m=n(161);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O=Object(c.n)(),y=Object(c.f)({hot:!0}),w=Object(c.f)({current_page:1}),j={head:function(){return{title:"naice | 文章"}},layout:"layout",mixins:[v.a,m.a],components:{ToTop:d},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,e.next=3,O;case 3:return n=e.sent,e.next=6,w;case 6:return r=e.sent,e.next=9,y;case 9:return o=e.sent,e.abrupt("return",{tags:n,article:r.result.list,hotArticle:o.result.list});case 11:case"end":return e.stop()}}),e)})))()},data:function(){return{showFixedTag:!1,sideHot:null,isLoadingData:!1,hasMore:!0,page:1}},computed:{scrollTop:function(){return this.$store.state.scrollTop}},methods:{loadMore:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isLoadingData=!0,this.page+=1;var n=_({current_page:this.page},e);Object(c.f)(n).then((function(n){t.isLoadingData=!1;var r=n.result;t.page>=r.pagination.total_page&&(t.hasMore=!1);var o=[];o=e.tag||e.keyword||e.isNew?r.list:t.article.concat(r.list),t.article=o,t.$nextTick((function(){t.footer()}))})).catch((function(e){t.isLoadingData=!1}))},goDetail:function(t,data){var e=data.filter((function(e){return e._id==t}));this.$store.commit("selectArticle",e[0]),this.$router.push("/article/"+t)}},mounted:function(){var t=this;this.$nextTick((function(){t.sideHot=document.querySelector("#sideHot"),t.mailContentDom=document.querySelector("#mailContent"),t.windowHeight=document.documentElement.clientHeight,t.footer(),window.addEventListener("scroll",(function(e){var n=$(document).scrollTop(),r=t.mailContentDom.offsetHeight;t.showFixedTag=n>=t.sideHot.offsetHeight+80,t.windowHeight+n>r-50&&!t.isLoadingData&&t.hasMore&&t.loadMore()}))}))},beforeRouteEnter:function(t,e,n){n((function(e){(t.query.tag||t.query.keyword)&&e.loadMore(t.query)}))},beforeRouteUpdate:function(t,e,n){this.page=0,this.hasMore=!0,t.query.tag||t.query.keyword?this.loadMore(t.query):this.loadMore({isNew:!0}),n()}},C=(n(209),Object(f.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"articleBox"},[n("main",{staticClass:"box main"},[n("section",{staticClass:"article"},[t._l(t.article,(function(e,r){return n("div",{key:r,staticClass:"item"},[n("a",{staticClass:"article-title",attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.goDetail(e._id,t.article)}}},[n("h2",[t._v(t._s(e.title))])]),t._v(" "),n("p",{staticClass:"article-desc"},[t._v(t._s(e.descript))]),t._v(" "),n("div",{staticClass:"article-info"},[n("span",{staticClass:"time"},[t._v(t._s(t.toTime(e.update_at,".")))]),t._v(" "),n("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),n("span",{staticClass:"time"},[e.meta?n("strong",[t._v(t._s(e.meta.views))]):t._e(),t._v("次阅读")]),t._v(" "),n("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),n("span",{staticClass:"time"},[e.meta?n("strong",[t._v(t._s(e.meta.comments))]):t._e(),t._v("条评论")]),t._v(" "),n("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),n("span",{staticClass:"time"},[e.meta?n("strong",[t._v(t._s(e.meta.likes))]):t._e(),t._v("人喜欢")])])])})),t._v(" "),t.hasMore?n("div",{staticClass:"loadmore"},[t.isLoadingData?n("span",[t._v("数据加载中...")]):t._e()]):n("div",{staticClass:"loadmore"},[t._v("没有更多数据了")])],2),t._v(" "),n("section",{staticClass:"side"},[n("div",{staticClass:"hot",attrs:{id:"sideHot"}},[n("div",{staticClass:"hot-title"},[t._v("热门文章")]),t._v(" "),n("div",{staticClass:"hot-article"},t._l(t.hotArticle,(function(e,r){return n("h3",{key:r,on:{click:function(n){return t.goDetail(e._id,t.hotArticle)}}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.title))])])})),0)]),t._v(" "),n("div",{class:t.showFixedTag?"fixedTag":""},[n("div",{staticClass:"tags",attrs:{id:"tags"}},[n("div",{staticClass:"hot-title"},[t._v("标签")]),t._v(" "),n("div",{staticClass:"tag-list"},t._l(t.tags.result.list,(function(e,r){return n("nuxt-link",{key:r,attrs:{to:"/article?tag="+e._id}},[t._v(t._s(e.name)),n("span",[t._v("("+t._s(e.count)+")")])])})),1)]),t._v(" "),n("div",{staticClass:"smallNav"},[n("div",{staticClass:"flag"}),t._v(" "),n("div",[n("nuxt-link",{attrs:{to:"/about"}},[t._v("我")]),t._v(" "),n("i",[t._v("•")]),t._v(" "),n("nuxt-link",{attrs:{to:"/hero"}},[t._v("留言墙")]),t._v(" "),n("i",[t._v("•")]),t._v(" "),n("nuxt-link",{attrs:{to:"/allarticle"}},[t._v("归档")])],1)])])])]),t._v(" "),n("to-top")],1)}),[],!1,null,"75c9965c",null));e.default=C.exports}}]);