exports.ids=[4],exports.modules={26:function(t,e,c){"use strict";e.a={methods:{footer(){$("#mailContent").height()<$(window).height()?this.$store.commit("changeFooterFixed",!0):this.$store.commit("changeFooterFixed",!1)}}}},27:function(t,e,c){"use strict";c.d(e,"f",(function(){return l})),c.d(e,"h",(function(){return v})),c.d(e,"g",(function(){return h})),c.d(e,"d",(function(){return m})),c.d(e,"n",(function(){return f})),c.d(e,"i",(function(){return _})),c.d(e,"a",(function(){return x})),c.d(e,"e",(function(){return $})),c.d(e,"c",(function(){return w})),c.d(e,"m",(function(){return N})),c.d(e,"j",(function(){return y})),c.d(e,"b",(function(){return T})),c.d(e,"l",(function(){return j})),c.d(e,"k",(function(){return k}));var o=c(24),r=c.n(o);r.a.interceptors.response.use(t=>t.data?t.data:{},(function(t){return Promise.reject(t)}));var n=r.a;const d="https://blogapi.naice.me/api/",l=(t={})=>n.get(d+"article/get",{params:t}),v=t=>n.get(`${d}article/get/${t}`),h=()=>n.get(d+"article/getAll"),m=t=>n.post(`${d}article/like/${t}`),f=()=>n.get(d+"tag/get"),_=t=>n.get(d+"comment/get",{params:t}),x=t=>n.put(d+"comment/add",{...t}),$=t=>n.post(`${d}comment/like/${t}`),w=t=>n.put(d+"reply/add",{...t}),N=t=>n.get(`${d}reply/get/${t}`),y=t=>n.get(d+"hero/get",{params:t}),T=t=>n.put(d+"hero/add",{...t}),j=t=>n.get(d+"project/get",{params:t}),k=t=>n.get(d+"music/get",{params:t})},30:function(t,e,c){"use strict";e.a={methods:{toZero:t=>t>9?t:"0"+t,toTime(t,e){const c=new Date(t);return`${c.getFullYear()}${e}${this.toZero(c.getMonth()+1)}${e}${this.toZero(c.getDate())}`}}}},34:function(t,e){t.exports={}},35:function(t,e){t.exports={}},51:function(t,e,c){"use strict";c.r(e);var o=c(34),r=c.n(o);for(var n in o)"default"!==n&&function(t){c.d(e,t,(function(){return o[t]}))}(n);e.default=r.a},52:function(t,e,c){"use strict";c.r(e);var o=c(35),r=c.n(o);for(var n in o)"default"!==n&&function(t){c.d(e,t,(function(){return o[t]}))}(n);e.default=r.a},59:function(t,e,c){"use strict";c.r(e);var o=c(27),r={data:()=>({scrollDom:null,scrollNum:0}),computed:{scrollTop(){return this.$store.state.scrollTop}},methods:{scroll(t){1===t?this.scrollNum+=400:this.scrollNum=0,$("html,body").animate({scrollTop:this.scrollNum+"px"},300)},mail(){window.open("http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=CTo_OTs4PDs6OUl4eCdqZmQ","_blank")}},watch:{scrollTop(t){this.scrollNum=t}}},n=c(1);var d=Object(n.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sideIcon"},[this._ssrNode('<i class="iconfont" data-v-56bc0acf></i> <i class="iconfont" data-v-56bc0acf></i> <i class="iconfont" data-v-56bc0acf></i>')])}),[],!1,(function(t){var e=c(51);e.__inject__&&e.__inject__(t)}),"56bc0acf","00bb231a").exports,l=c(26),v=c(30);let h=Object(o.n)(),m=Object(o.f)({hot:!0}),f=Object(o.f)({current_page:1});var _={head:()=>({title:"naice | 文章"}),layout:"layout",mixins:[l.a,v.a],components:{ToTop:d},async asyncData({params:t}){const e=await h,c=await f,o=await m;return{tags:e,article:c.result.list,hotArticle:o.result.list}},data:()=>({showFixedTag:!1,sideHot:null,isLoadingData:!1,hasMore:!0,page:1}),computed:{scrollTop(){return this.$store.state.scrollTop}},methods:{loadMore(t={}){this.isLoadingData=!0,this.page+=1;let e={current_page:this.page,...t};Object(o.f)(e).then(e=>{this.isLoadingData=!1;const{result:c}=e;this.page>=c.pagination.total_page&&(this.hasMore=!1);let o=[];o=t.tag||t.keyword||t.isNew?c.list:this.article.concat(c.list),this.article=o,this.$nextTick(()=>{this.footer()})}).catch(t=>{this.isLoadingData=!1})},goDetail(t,data){const e=data.filter(e=>e._id==t);this.$store.commit("selectArticle",e[0]),this.$router.push("/article/"+t)}},mounted(){this.$nextTick(()=>{this.sideHot=document.querySelector("#sideHot"),this.mailContentDom=document.querySelector("#mailContent"),this.windowHeight=document.documentElement.clientHeight,this.footer(),window.addEventListener("scroll",t=>{const e=$(document).scrollTop(),c=this.mailContentDom.offsetHeight;this.showFixedTag=e>=this.sideHot.offsetHeight+80,this.windowHeight+e>c-50&&!this.isLoadingData&&this.hasMore&&this.loadMore()})})},beforeRouteEnter(t,e,c){c(e=>{(t.query.tag||t.query.keyword)&&e.loadMore(t.query)})},beforeRouteUpdate(t,e,c){this.page=0,this.hasMore=!0,t.query.tag||t.query.keyword?this.loadMore(t.query):this.loadMore({isNew:!0}),c()}};var x=Object(n.a)(_,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"articleBox"},[t._ssrNode('<main class="box main" data-v-75c9965c>',"</main>",[t._ssrNode('<section class="article" data-v-75c9965c>'+t._ssrList(t.article,(function(e,c){return'<div class="item" data-v-75c9965c><a href="javascript:void(0)" class="article-title" data-v-75c9965c><h2 data-v-75c9965c>'+t._ssrEscape(t._s(e.title))+'</h2></a> <p class="article-desc" data-v-75c9965c>'+t._ssrEscape(t._s(e.descript))+'</p> <div class="article-info" data-v-75c9965c><span class="time" data-v-75c9965c>'+t._ssrEscape(t._s(t.toTime(e.update_at,".")))+'</span> <i class="iconfont" data-v-75c9965c></i> <span class="time" data-v-75c9965c>'+(e.meta?"<strong data-v-75c9965c>"+t._ssrEscape(t._s(e.meta.views))+"</strong>":"\x3c!----\x3e")+'次阅读</span> <i class="iconfont" data-v-75c9965c></i> <span class="time" data-v-75c9965c>'+(e.meta?"<strong data-v-75c9965c>"+t._ssrEscape(t._s(e.meta.comments))+"</strong>":"\x3c!----\x3e")+'条评论</span> <i class="iconfont" data-v-75c9965c></i> <span class="time" data-v-75c9965c>'+(e.meta?"<strong data-v-75c9965c>"+t._ssrEscape(t._s(e.meta.likes))+"</strong>":"\x3c!----\x3e")+"人喜欢</span></div></div>"}))+" "+(t.hasMore?'<div class="loadmore" data-v-75c9965c>'+(t.isLoadingData?"<span data-v-75c9965c>数据加载中...</span>":"\x3c!----\x3e")+"</div>":'<div class="loadmore" data-v-75c9965c>没有更多数据了</div>')+"</section> "),t._ssrNode('<section class="side" data-v-75c9965c>',"</section>",[t._ssrNode('<div id="sideHot" class="hot" data-v-75c9965c><div class="hot-title" data-v-75c9965c>热门文章</div> <div class="hot-article" data-v-75c9965c>'+t._ssrList(t.hotArticle,(function(e,c){return'<h3 data-v-75c9965c><a href="javascript:void(0)" data-v-75c9965c>'+t._ssrEscape(t._s(e.title))+"</a></h3>"}))+"</div></div> "),t._ssrNode("<div"+t._ssrClass(null,t.showFixedTag?"fixedTag":"")+" data-v-75c9965c>","</div>",[t._ssrNode('<div id="tags" class="tags" data-v-75c9965c>',"</div>",[t._ssrNode('<div class="hot-title" data-v-75c9965c>标签</div> '),t._ssrNode('<div class="tag-list" data-v-75c9965c>',"</div>",t._l(t.tags.result.list,(function(e,o){return c("nuxt-link",{key:o,attrs:{to:"/article?tag="+e._id}},[t._v(t._s(e.name)),c("span",[t._v("("+t._s(e.count)+")")])])})),1)],2),t._ssrNode(" "),t._ssrNode('<div class="smallNav" data-v-75c9965c>',"</div>",[t._ssrNode('<div class="flag" data-v-75c9965c></div> '),t._ssrNode("<div data-v-75c9965c>","</div>",[c("nuxt-link",{attrs:{to:"/about"}},[t._v("我")]),t._ssrNode(" <i data-v-75c9965c>•</i> "),c("nuxt-link",{attrs:{to:"/hero"}},[t._v("留言墙")]),t._ssrNode(" <i data-v-75c9965c>•</i> "),c("nuxt-link",{attrs:{to:"/allarticle"}},[t._v("归档")])],2)],2)],2)],2)],2),t._ssrNode(" "),c("to-top")],2)}),[],!1,(function(t){var e=c(52);e.__inject__&&e.__inject__(t)}),"75c9965c","5a857705");e.default=x.exports}};